<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Softener Quest: Grocery Store Edition</title>
<style>
  body { font-family: sans-serif; max-width: 600px; margin: 2em auto; }
  textarea { width: 100%; height: 60px; }
  button { margin-top: 0.5em; }
  #meter { font-weight: bold; }
</style>
</head>
<body>

<h2>Softener Quest: Grocery Store Edition</h2>

<p><strong>Softener Meter:</strong> <span id="meter">0</span></p>

<div id="sceneContainer">

  <div id="groceryScene">
    <p>You are at the grocery store and cannot find baking soda. An employee is stocking shelves.</p>
    <textarea id="playerInput" placeholder="Type your request here"></textarea>
    <br>
    <button onclick="checkGroceryInput()">Submit</button>
    <div id="groceryResult"></div>
  </div>

  <div id="classmateScene" style="display:none;">
    <p>You are in class and need help understanding a homework problem. A classmate is nearby.</p>
    <textarea id="classmateInput" placeholder="Type your request here"></textarea>
    <br>
    <button onclick="checkClassmateInput()">Submit</button>
    <div id="classmateResult"></div>
  </div>

  <div id="professorScene" style="display:none;">
    <p>You need to email your professor for help. Make sure your email is polite and shows you tried first.</p>
    <textarea id="professorInput" placeholder="Type your email here"></textarea>
    <br>
    <button onclick="checkProfessorInput()">Submit</button>
    <div id="professorResult"></div>
  </div>

</div>

<script>
function updateMeter(score) {
  document.getElementById("meter").innerText = score;
}

function checkGroceryInput() {
  let input = document.getElementById("playerInput").value.toLowerCase();
  let score = 0;
  if(input.includes("could") || input.includes("would")) score++;
  if(input.includes("please")) score++;
  if(input.includes("maybe") || input.includes("possibly") || input.includes("by any chance")) score++;
  updateMeter(score);
  document.getElementById("groceryResult").innerText = (score>=2) ? 
    "Success! The employee smiles and walks you to the baking soda." : 
    "The employee looks startled. Try softening your request.";
  if(score>=2){
    document.getElementById("groceryScene").style.display="none";
    document.getElementById("classmateScene").style.display="block";
    updateMeter(0);
  }
  document.getElementById("playerInput").value="";
}

function checkClassmateInput() {
  let input = document.getElementById("classmateInput").value.toLowerCase();
  let score = 0;
  if(input.includes("could") || input.includes("would")) score++;
  if(input.includes("please")) score++;
  if(input.includes("maybe") || input.includes("help") || input.includes("moment")) score++;
  updateMeter(score);
  document.getElementById("classmateResult").innerText = (score>=2) ? 
    "Great! Your classmate explains the problem clearly." : 
    "Your classmate looks confused. Try softening your request.";
  if(score>=2){
    document.getElementById("classmateScene").style.display="none";
    document.getElementById("professorScene").style.display="block";
    updateMeter(0);
  }
  document.getElementById("classmateInput").value="";
}

function checkProfessorInput() {
  let input = document.getElementById("professorInput").value.toLowerCase();
  let score = 0;
  if(input.includes("could") || input.includes("would")) score++;
  if(input.includes("please")) score++;
  if(input.includes("sorry") || input.includes("moment") || input.includes("if you have a chance")) score++;
  if(input.includes("i read the syllabus") || input.includes("i tried") || input.includes("i looked")) score++;
  updateMeter(score);
  let resultText = "";
  if(score>=3) resultText="Success! Your professor replies kindly and helps you.";
  else if(score===2) resultText="Almost there! Consider showing you tried first and softening your request more.";
  else resultText="Your email seems abrupt. Professors appreciate polite, soft requests.";
  document.getElementById("professorResult").innerText = resultText;
  if(score>=3) alert("Demo complete! You successfully navigated grocery, classmate, and professor scenes.");
  document.getElementById("professorInput").value="";
}
</script>

</body>
</html>
